# Effect size calculators

![](C:/Users/Admin/Documents/R/WORKING_DIRECTORY/Meta-Analyse Buch/bookdown-demo-master/effect.jpg)

Although the `meta` package can calculate all **individual effect sizes for every study** if we use the `metabin` or `metacont` function, a frequent scenario is that **some papers do not report the effect size data in the right format**. Especially older articles may often only report results of $t$**-tests**, **ANOVAs**, or $\chi^2$**-tests**. If enough data is reported, we can also use **such outcome formats to calculate effect sizes**. This way, we can calculate the **effect size (e.g., Hedges' g)** and the **Standard Error (SE)**, which we can then use in a meta-analysis with **pre-calculated effect sizes** using the `metagen` function (see [Chapter 4.1.1](#pre.calc)).

```{block,type='rmdinfo'}
**Hedges' g**

When dealing with **continuous outcome data**, it is conventional to calculate the **Standardized Mean Difference** (SMD) as an outcome for each study, and as your **summary measure** [@borenstein2011].

A common format to to calculate the SMD in single trials is **Cohen's d** [@cohen1988statistical]. Yet, this summary measure has been **shown to have a slight bias in small studies, for which it overestimates the effect** [@hedges1981distribution].

**Hedges *g* ** is a similar summary measure, but it **controls for this bias**. It uses a slightly different formula to calculate the pooled variance $s_{pooled}$, $s*_{pooled}$. The transformation from *d* to *g* is often performed using the formula by Hedges and Olkin [@hedges1985statistical]. 

$$g \simeq d\times(1-\frac{3}{4(n_1+n_2)-9}) $$

```

```{block,type='rmdachtung'}
Hedges' g is **commonly used in meta-analysis**, and it's the standard output format in **RevMan**. Therefore, we highly recommend that you also use this measure in you meta-analysis.

In `meta`'s `metabin` and `metacont` function, Hedges' g is automatically calculated for each study if we set `sm="SMD"`. If you use the `metgen` function, however, you should calculate Hedges' g for each study yourself first.
```

To calculate the effect sizes, we will use Daniel LÃ¼decke's extremely helpful `esc` package [@esc]. So, please **install this package first** using the `install.packages("esc")` command, and then load it in you library.


```{r,message=FALSE}
library(esc)
```

<br><br>

**Here's an overview of all calculators covered in this guide**

1.  [Calculating Hedges' *g* from the Mean and SD](#a)
2.  [Calculating Hedges' *g* from a regression coefficient](#b)
3.  [Calculating an Odd's Ratio from *Chi-square*](#c)
4.  [Calculating Hedges' *g* from a one-way ANOVA](#d)
5.  [Calculating Hedges' *g* from the Mean and SE](#e)
6.  [Calculating Hedges' *g* from a correlation](#f)
7.  [Calculating Hedges' *g* from an independent t-test](#g)
8.  [Calculating Hedges' *g* from Cohen's *d*](#h)

<br><br>

## Calculating Hedges' g from the Mean and SD {#a}

To calculate Hedges' *g* from the *Mean*, *Standard Deviation*, and $n_{group}$ of both trial arms, we can use the `esc_mean_sd` function with the following parameters.


* `grp1m`: The **mean** of the **first group** (e.g., the intervention).
* `grp1sd`: The **standard deviation** of the **first group**.
* `grp1n`: The **sample size** of the **first group**.
* `grp2m`: The **mean** of the **second group**.
* `grp2sd`: The **standard deviation** of the **second group**.
* `grp2n`: The **sample size** of the **second group**.
* `totalsd`: The **full sample standard deviation**, if the standard deviation for each trial arm is not reported
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`.

<br><br>

**Here's an example**

```{r}
esc_mean_sd(grp1m = 10.3, grp1sd = 2.5, grp1n = 60,
grp2m = 12.3, grp2sd = 3.1, grp2n = 56, es.type = "g")
```




## Calculating Hedges' *g* from a regression coefficient {#b}

### Unstandardized regression coefficients

It is also possible to calculate **Hedges' *g* ** from an unstandardized or standardized regression coeffiecent [@lipsey2001practical].

For **unstardardized coefficients**, we can use the `esc_B` function with the following parameters:

* `b`: unstandardized coefficient $b$ (the "treatment" predictor).
* `sdy`: the standard deviation of the dependent variable $y$ (i.e., the outcome).
* `grp1n`: the number of participants in the first group.
* `grp2n`: the number of participants in the second group.
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`. 

<br><br>

**Here's an example**

```{r}
esc_B(b=3.3,sdy=5,grp1n = 100,grp2n = 150,es.type = "g")
```

<br><br>

### Standardized regression coefficents

Here, we can use the `esc_beta` function with the follwing parameters:

* `beta`: standardized coefficient $\beta$ (the "treatment" predictor).
* `sdy`: the standard deviation of the dependent variable $y$ (i.e., the outcome).
* `grp1n`: the number of participants in the first group.
* `grp2n`: the number of participants in the second group.
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`. 

<br><br>

**Here's an example**

```{r}
esc_beta(beta=0.7, sdy=3, grp1n=100, grp2n=150, es.type = "g")
```

## Calculating an Odd's Ratio from *Chi-square* {#c}

To calculate the **Odd's Ratio** (or any other kind of effect size measure) from $\chi^2$ using the `esc_chisq` function with the following paramters:

* `chisq`: The value of Chi-squared (or only `p`)
* `p`: the chi squared p or phi value (or only `chisq`)
* `totaln`: total sample size
* `es.type`: the summary measure (in our case, `"cox.or"`)

<br><br>
**Here's an example**

```{r}
esc_chisq(chisq=9.9,totaln=100,es.type="cox.or")
```


## Calculating Hedges' *g* from a one-way ANOVA {#d}

We can also derive the SMD from the $F$-value of a **one-way ANOVA with two groups**. Such ANOVAs can be detected if you look for the **degrees of freedom** ($df$) underneath of $F$. In a one-way ANOVA with two groups, the degrees of freedom should always start with $1$ (e.g. $F_{1,147}=5.31$). The formula for this transformation looks like this [@cohen1992power;@rosnow1996computing;@rosnow2000contrasts]:

$$d = \sqrt{  F(\frac{n_t+n_c}{n_t n_c})(\frac{n_t+n_c}{n_t+n_c-2})}$$

To calculate **Hedges' g** from $F$-values, we can use the `esc_f` function with the following parameters:


* `f`: *F*-value of the ANOVA
* `grp1n`: Number of participants in group 1
* `grp2n`: Number of participants in group 2
* `totaln`: The total number of participants (if the *n* for each group is not reported)
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`. 


<br><br>

**Here's an example**

```{r}
esc_f(f=5.04,grp1n = 519,grp2n = 528,es.type = "g")
```


## Calculating Hedges' *g* from the Mean and SE {#e}

When calculating **Hedges' g** from the **Mean** and **Standard Error**, we simply make use of the fact that the Standard error is not much more than the **Standard Deviation** when the sample size is taken into account [@thalheimer2002calculate]: 

$$SD = SE\sqrt{n_c}$$

We can calculate **Hedges' g** using the `esc_mean` function with the following parameters:

* `grp1m`: The mean of the first group.
* `grp1se`: The standard error of the first group.
* `grp1n`: The sample size of the first group.
* `grp2m`: The mean of the second group.
* `grp2se`: The standard error of the second group.
* `grp2n`: The sample size of the second group.
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`. 

<br><br>

**Here's an example**

```{r}
esc_mean_se(grp1m = 8.5, grp1se = 1.5, grp1n = 50,
  grp2m = 11, grp2se = 1.8, grp2n = 60, es.type = "g")
```

## Calculating Hedges' *g* from a correlation {#f}

For **equally sized groups** ($n_1=n_2$), we can use the following formula to derive the SMD from the pointbiserial **correlation** [@rosenthal1984meta].

$$r_{pb} = \frac{d}{\sqrt{d^2+4}}$$
And this formula for **unequally sized groups** [@aaron1998equating]:

$$r_{pb} = \frac{d}{\sqrt{d^2+  \frac{(N^2-2 \times N)}{n_1 n_2} }}$$
To convert $r_{pb}$ to **Hedges' g**, we can use the `esc_rpb` function with the following parameters:


* `r`: The *r*-value. Either *r* or its *p*-value must be given.
* `p`: The *p*-value of the correlation. Either *r* or its *p*-value must be given.
* `grp1n`: The sample size of group 1.
* `grp2n`: The sample size of group 2.
* `totaln`: Total sample size, if `grp1n` and `grp2n` are not given.
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`. 


```{r}
esc_rpb(r = 0.25, grp1n = 99, grp2n = 120, es.type = "g")
```


## Calculating Hedges' *g* from an independent t-test {#g}

The SMD can also be derived from an **independent t-test value** with the following formula [@thalheimer2002calculate]:

$$d = \frac {t(n_1+n_2)}{\sqrt{(n_1+n_2-2)(n_1n_2)}}$$

We can calculate **Hedges' g** from a **t-test** using the `esc_t` function with the following paramters:

* `t`: The t-value of the t-test. Either *t* or its *p*-value must be given.
* `p`: The *p*-value of the t-test. Either *t* or its *p*-value must be given.
* `grp1n`: The sample size of group 1.
* `grp2n`: The sample size of group 2.
* `totaln`: Total sample size, if `grp1n` and `grp2n` are not given.
* `es.type`: the **effect measure** we want to calculate. In our case this is `"g"`. But we could also calculate Cohen's *d* using `"d"`. 

<br><br>

**Here's an example**


```{r}
esc_t(t = 3.3, grp1n = 100, grp2n = 150,es.type="g")
```


## Calculating Hedges' *g* from Cohen's *d* {#h}

We can also directly correct **Cohen's *d* ** and thus generate **Hedges' g** using the formula by Hedges and Olkin [@hedges1985statistical]:
 

$$g \simeq d\times(1-\frac{3}{4(n_1+n_2)-9}) $$
This can be done in R using the `hedges_g` function with the following parameters:

* `d`: The value of **Cohen's d**
* `totaln`: the total *N* in the study


```{r}
hedges_g(d = 0.75, totaln = 50)
```





